
# Linux Logs & Error Management â€” Full Endâ€‘toâ€‘End Project (RHEL / AlmaLinux / CentOS Stream 9)

This is a **complete, productionâ€‘grade handsâ€‘on project** designed to turn you into an expert in Linux logging using **RHELâ€‘based systems** (RHEL 8/9, CentOS Stream 9, AlmaLinux).

Every task includes:

* âœ” Full **VI-based file creation** (no HEREDOC)
* âœ” All commands rewritten for **yum/dnf** only
* âœ” **Lineâ€‘byâ€‘line explanations**
* âœ” Realistic application log locations
* âœ” System logs, service logs, audit logs, troubleshooting

---

# ðŸš€ Project Overview

You will create **3 applications** on your system:

### ðŸ”¹ Application 1 â€” Stored in `/var/log/myapp1/`

### ðŸ”¹ Application 2 â€” Stored in `/var/log/myapp2/`

### ðŸ”¹ Application 3 â€” Stored in a custom folder `/opt/customlogs/`

Each app will:

* Write logs continuously
* Generate errors
* Be monitored using: `journalctl`, `tail`, `grep`, `awk`, `logrotate`, `systemctl`, SELinux audit logs, etc.

**************************************************************************************************************

# ðŸ“Œ Task 0 â€” Install Required Packages

Run:

```bash
sudo dnf install -y tree vim jq rsyslog
```

### Lineâ€‘byâ€‘line explanation

* `dnf install -y ...` â†’ Installs tools without asking confirmation.
* `tree` â†’ Helps visualize directories.
* `vim` â†’ Editor used in this project.
* `jq` â†’ JSON log parsing.
* `rsyslog` â†’ Ensures syslog logging is enabled.

***************************************************************************************************************

# ðŸ“Œ Task 1 â€” Create Application 1 (`myapp1`) Logging to `/var/log/myapp1/`

## Step 1: Create the directory

```bash
sudo mkdir -p /var/log/myapp1
```

**Explanation:**

* `mkdir -p` â†’ Creates directory; no error if it already exists.
* `/var/log/myapp1` â†’ Custom application log directory.

## Step 2: Create the application script

```bash
sudo vi /usr/local/bin/myapp1.sh
```

Paste inside (press `i` to insert):

```bash

#!/bin/bash
while true; do
  echo "INFO: MyApp1 is running at $(date)" >> /var/log/myapp1/myapp1.log
  sleep 5

done

```

Save: `ESC` â†’ `:wq`

### Explanation (line-by-line):

* `#!/bin/bash` â†’ Interpreter line.
* `while true; do` â†’ Infinite loop.
* `echo ... >> file` â†’ Appends log lines into log file.
* `$(date)` â†’ Current timestamp.
* `sleep 5` â†’ Runs every 5 seconds.

## Step 3: Make script executable

```bash
sudo chmod +x /usr/local/bin/myapp1.sh
```

## Step 4: Create a systemd service for MyApp1

```bash
sudo vi /etc/systemd/system/myapp1.service
```

Paste:

```ini
[Unit]
Description=MyApp1 Logging Application

[Service]
ExecStart=/usr/local/bin/myapp1.sh
Restart=always

[Install]
WantedBy=multi-user.target
```

Save & exit.

## Step 5: Start the service

```bash
sudo systemctl daemon-reload
sudo systemctl enable --now myapp1.service
```

### Step 6: Monitor logs

```bash
tail -f /var/log/myapp1/myapp1.log
```

*************************************************************************************************************







*************************************************************************************************************
# ðŸ“Œ Task 2 â€” Create Application 2 (`myapp2`) Logging to `/var/log/myapp2/`

Same method as Task 1, but this app produces **warnings + errors**.

## Step 1: Create log folder

```bash
sudo mkdir -p /var/log/myapp2
```

## Step 2: Create the script

```bash
sudo vi /usr/local/bin/myapp2.sh
```

Paste:

```bash
#!/bin/bash
count=0
while true; do
  echo "INFO: MyApp2 heartbeat $(date)" >> /var/log/myapp2/app.log

  if (( count % 3 == 0 )); then
    echo "WARNING: MyApp2 unusual event $(date)" >> /var/log/myapp2/app.log
  fi

  if (( count % 5 == 0 )); then
    echo "ERROR: MyApp2 failure event $(date)" >> /var/log/myapp2/error.log
  fi

  count=$((count+1))
  sleep 4
done
```

### Line-by-line explanation

* `count=0` â†’ Counter used for generating periodic errors.
* `% 3 == 0` â†’ Every 3 cycles produce a warning.
* `% 5 == 0` â†’ Every 5 cycles produce an error.
* Logs are separated: `app.log` and `error.log`.

## Step 3: Enable service

Same as before.

***********************************************************************************************************







************************************************************************************************************
# ðŸ“Œ Task 3 â€” Application 3 logs into `/opt/customlogs/`

## Step 1: Create folder

```bash
sudo mkdir -p /opt/customlogs
```

## Step 2: Script

```bash
sudo vi /usr/local/bin/myapp3.sh
```

Paste:

```bash
#!/bin/bash
while true; do
  echo "{\"level\":\"info\", \"msg\":\"App3 event\", \"ts\":\"$(date)\"}" >> /opt/customlogs/json.log
  sleep 3
done
```

### Explanation

* Writes JSON logs â†’ useful for jq parsing.

*************************************************************************************************************






**************************************************************************************************************

# ðŸ“Œ Task 4 â€” Understand `/var/log` Structure (RHEL)

Run:

```bash
tree -L 1 /var/log
```

### Important folders

| Log File                   | Purpose                       |
| -------------------------- | ----------------------------- |
| `/var/log/messages`        | General syslog logs           |
| `/var/log/secure`          | Authentication / sudo logs    |
| `/var/log/audit/audit.log` | SELinux + security audit logs |
| `/var/log/cron`            | Cron job logs                 |
| `/var/log/httpd/`          | Apache logs                   |
| `/var/log/dnf.log`         | Package installation logs     |


**************************************************************************************************************




**************************************************************************************************************

# ðŸ“Œ Task 5 â€” Journalctl Mastery (systemd logs)

### View all logs

```bash
journalctl
```

### Most recent logs

```bash
journalctl -xe
```

Explanation:

* `-x` â†’ Adds explanation.
* `-e` â†’ Jump to end.

### Logs for a specific service

```bash
journalctl -u myapp1.service -f
```


**************************************************************************************************************




**************************************************************************************************************

# ðŸ“Œ Task 6 â€” SELinux Log Analysis

Check SELinux denials:

```bash
sudo grep AVC /var/log/audit/audit.log
```

List detailed events:

```bash
sudo ausearch -m avc
```


**************************************************************************************************************





**************************************************************************************************************

# ðŸ“Œ Task 7 â€” Grep, Awk, Sed Log Processing

### Find errors

```bash
grep -i error /var/log/myapp2/error.log
```

### Extract timestamps

```bash
awk '{print $NF}' /var/log/myapp1/myapp1.log
```

### Replace text

```bash
sed 's/INFO/DEBUG/g' /var/log/myapp1/myapp1.log
```


**************************************************************************************************************





**************************************************************************************************************

# ðŸ“Œ Task 8 â€” Setup Log Rotation

Create rule:

```bash
sudo vi /etc/logrotate.d/myapps
```

Paste:

```conf
/var/log/myapp1/*.log {
  daily
  rotate 7
  compress
  missingok
}

/var/log/myapp2/*.log {
  size 5M
  rotate 5
  compress
}
```


**************************************************************************************************************






**************************************************************************************************************



**************************************************************************************************************

# ðŸ“Œ Task 9 â€” Error Simulation & Troubleshooting

Stop service:

```bash
sudo systemctl stop myapp1
```

Check reason:

```bash
sudo systemctl status myapp1
journalctl -u myapp1 -xe
```


**************************************************************************************************************






**************************************************************************************************************

# ðŸ“Œ Task 10 â€” Final Exercises

âœ” Create a new app writing logs in `/srv/logs/`
âœ” Add log rotation
âœ” Parse logs using awk
âœ” Fix a deliberate SELinux denial

---

# END OF REWRITE â€” RHEL, AlmaLinux, CentOS Stream 9 Optimized

**************************************************************************************************************